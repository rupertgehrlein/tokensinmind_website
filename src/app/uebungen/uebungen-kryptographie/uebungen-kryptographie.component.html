<div class="container">
  <h1 class="display-4 text">Kryptographie</h1>
</div>

<div class="container">
  <div class="row align-items-center">
    <div class="col text">

      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="uebung1-tab" data-bs-toggle="tab" data-bs-target="#uebung1-tab-pane"
            type="button" role="tab" aria-controls="uebung1-tab-pane" aria-selected="true">Caesar-Chiffre</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="uebung2-tab" data-bs-toggle="tab" data-bs-target="#uebung2-tab-pane"
            type="button" role="tab" aria-controls="uebung2-tab-pane" aria-selected="false">RSA Verschlüsselung</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="uebung3-tab" data-bs-toggle="tab" data-bs-target="#uebung3-tab-pane"
            type="button" role="tab" aria-controls="uebung3-tab-pane" aria-selected="false">Hashing</button>
        </li>
        <!-- <li class="nav-item" role="presentation">
          <button class="nav-link" id="uebung4-tab" data-bs-toggle="tab" data-bs-target="#uebung4-tab-pane"
            type="button" role="tab" aria-controls="uebung4-tab-pane" aria-selected="false">SHA 256</button>
        </li> -->
      </ul>
      <div class="tab-content" id="myTabContent">


        <div class="tab-pane fade show active" id="uebung1-tab-pane" role="tabpanel" aria-labelledby="uebung1-tab"
          tabindex="0">
          <div class="row">
            <p>In dieser Übung kannst du mit dem Caesar-Chiffre Nachrichten verschlüsseln. Mach das am besten mit deinem
              Sitznachbarn. Gib hierfür zunächst deine Nachricht in das Feld bei "Nachricht verschlüsseln" ein und wähle
              deine Verschiebung aus. Klicke anschließend auf "Verschlüsseln". Du erhälst nun deine verschlüsselte
              Nachricht, die du mit deinem Sitznachbarn teilen kannst. Wenn du die geheime Nachricht deines Sitznachbarn
              bekommen hast, dann brauchst du nur noch die passende Verschiebung. Beides kannst du dann bei der
              Überschrift "Nachricht entschlüsseln" eingeben und erhälst die ursprüngliche Nachricht. Zusätzlich findest
              ganz unten ein kleines Rätsel. Kannst du es knacken?</p>
          </div>
          <div class="container tabs">
            <form action="">
              <h4 class="text">Nachricht verschlüsseln:</h4>
              <div class="row g-2 row-cols-1 row-cols-lg-2">
                <div class="col-3">
                  <label for="" class="label">Text:</label>
                </div>
                <div class="col">
                  <input type="text" class="input" (change)="getTextEncode($event)">
                </div>
              </div>
              <div class="row g-2 row-cols-1 row-cols-lg-2">
                <div class="col-3">
                  <label for="" class="label">Verschiebung</label>
                </div>
                <div class="col">
                  <select formControlName="number" (change)="getSelectEncode($event)" [value]="">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                  </select>
                </div>
              </div>
              <div class="row g-2 row-cols-1 row-cols-lg-2">
                <div class="col-3">
                  <button class="btn btn-primary" type="button" (click)="encode()">
                    Verschlüsseln
                  </button>
                </div>
                <div class="col" *ngIf="encoded">
                  {{encoded}}
                </div>
              </div>
            </form>

            <form action="">
              <h4 class="text">Nachricht entschlüsseln:</h4>
              <div class="row g-2 row-cols-1 row-cols-lg-2">
                <div class="col-3">
                  <label for="" class="label">Text:</label>
                </div>
                <div class="col">
                  <input type="text" class="input" (change)="getTextDecode($event)">
                </div>
              </div>
              <div class="row g-2 row-cols-1 row-cols-lg-2">
                <div class="col-3">
                  <label for="" class="label">Verschiebung</label>
                </div>
                <div class="col">
                  <select formControlName="number" (change)="getSelectDecode($event)" [value]="">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                  </select>
                </div>
              </div>
              <div class="row g-2 row-cols-1 row-cols-lg-2">
                <div class="col-3">
                  <button class="btn btn-primary" type="button" (click)="decode()">
                    Entschlüsseln
                  </button>
                </div>
                <div class="col" *ngIf="decoded">
                  {{decoded}}
                </div>
              </div>
              <h4>Rätsel:</h4>
              <div class="row">
                <div class="col">
                  <p>Erinnerst du dich noch an unsere Lektion zur Caesar-Chiffre? Wenn ja, kannst du unsere geheime
                    Nachricht auch ohne den Schlüssel zu kennen entschlüsseln?</p>
                </div>
              </div>
              <div class="row g-2 row-cols-1 row-cols-lg-2">
                <div class="col-3">
                  RYRSNAGRA RFFRA TREAR YRPXRER ORRERA
                </div>
                <div class="col">
                  <input type="text" class="input" (change)="getSolution($event)">
                </div>
              </div>
              <div class="row g-2 row-cols-1 row-cols-lg-2">
                <div class="col-3">
                  <button class="btn btn-primary" type="button" (click)="riddle()">
                    Lösung testen
                  </button>
                </div>
                <div class="col" *ngIf="riddleSolved != null">
                  <p *ngIf="!riddleSolved">Das ist nicht richtig</p>
                  <p *ngIf="riddleSolved">Super gelöst!</p>
                </div>
              </div>
            </form>
          </div>
        </div>


        <div class="tab-pane fade" id="uebung2-tab-pane" role="tabpanel" aria-labelledby="uebung2-tab" tabindex="0">
          <div class="row">
            <p>Hier kannst du testen wie das mit der RSA Verschlüsselung funktioniert. Lass dir zuerst ein Schlüsselpaar
              generieren und geben dann eine kurze geheime Nachricht ein. Anschließend kannst du die Nachricht mit dem
              öffentlichen Schlüssel verschlüsseln. Darunter hast du nun 2 Möglichkeiten: Einmal kannst du die Nachricht
              mit deinem privaten Schlüssel wieder entschlüsseln und einmal kannst du dir anzeigen lassen, wie deine
              Nachricht für andere Leute aussieht, die nicht deinen privaten Schlüssel haben. Wie du siehst kann man
              ohne den richtigen Schlüssel nicht wirklich was mit der Nachricht anfangen. Solange du also deinen
              privaten Schlüssel nicht mit anderen teilst, kannst du dir sicher sein, dass niemand deine privaten
              Nachrichten lesen und verstehen kann.</p><br>
            <p><b><u>Hinweis:</u></b> Es kann vorkommen, dass dir von unserer Webseite falsche private Schlüssel
              erstellt werden. Dies erkennst du daran, dass dir beim entschlüsseln der Nachricht nicht die richtige
              Nachricht angezeigt wird. Sollte das passieren klicke einfach noch einmal auf "Schlüssel generieren".</p>
          </div>
          <div class="row row-cols-1 row-cols-lg-2">
            <h4>Generiere dein Schlüsselpaar</h4>
            <div class="col">
              <button class="btn btn-primary" type="button" (click)="generateKeys()">Schlüssel generieren</button>
            </div>
            <div class="col">
              <div *ngIf="publicKey && privateKey">
                <p>Öffentlicher Schlüssel: {{publicKey}}</p>
                <p>Privater Schlüssel: {{privateKey}}</p>
              </div>
            </div>
          </div>
          <div class="row row-cols-1 row-cols-lg-2">
            <h4>Nachricht verschlüsseln</h4><br>
            <p>Hier wird nun dein Text mit dem öffentlichen Schlüssel verschlüsselt:</p><br>
            <div class="col">
              <label for="plainText" class="label">Nachricht:</label>
            </div>
            <div class="col">
              <input type="text" id="plainText" class="input w-100" (input)="getPlainText($event)"
                [disabled]="!keysGenerated">
            </div>
          </div>
          <div class="row row-cols-1 row-cols-lg-2">
            <div class="col-3">
              <button class="btn btn-primary" type="button" (click)="encrypt()"
                [disabled]="!keysGenerated || !plainText">Verschlüsseln</button>
            </div>
            <div class="col" *ngIf="encryptedMessage">
              Verschlüsselte Nachricht: {{encryptedMessage}}
            </div>
          </div>
          <div class="row row-cols-1 row-cols-lg-2">
            <h4>Nachricht entschlüsseln</h4><br>
            <p>Und hier wird die verschlüsselte Nachricht genommen und mit deinem privaten Schlüssel wieder
              entschlüsselt:</p><br>
          </div>
          <div class="row row-cols-1 row-cols-lg-2">
            <div class="col-3">
              <button class="btn btn-primary" type="button" (click)="decrypt()"
                [disabled]="!encryptedMessage">Entschlüsseln</button>
            </div>
            <div class="col" *ngIf="decryptedMessage">
              Entschlüsselte Nachricht: {{decryptedMessage}}
            </div>
          </div>
          <div class="row row-cols-1 row-cols-lg-2">
            <h4>Entschlüsselung mit falschem privaten Schlüssel</h4><br>
            <p>Hier wird versucht, die verschlüsselte Nachricht mit einem falschen privaten Schlüssel zu entschlüsseln:
            </p><br>
          </div>
          <div class="row row-cols-1 row-cols-lg-2">
            <div class="col">
              <button class="btn btn-primary" type="button" (click)="decryptWithWrongKey()"
                [disabled]="!encryptedMessage">Mit falschem Schlüssel entschlüsseln</button>
            </div>
            <div class="col" *ngIf="wrongDecryptedMessage">
              Ergebnis mit falschem Schlüssel: {{wrongDecryptedMessage}}
            </div>
          </div>

        </div>


        <div class="tab-pane fade" id="uebung3-tab-pane" role="tabpanel" aria-labelledby="uebung3-tab" tabindex="0">
          <div class="row">
            <div class="col">
              <div class="text">
                In diesem Beispiel lassen wir deine Daten einfach nur durch den Hash-Algorithmus (SHA 256) laufen. Wie
                du siehst
                geht das Hashen super schnell. Gleichzeitig solltest du auch erkennen können, dass bereits die
                kleinsten
                Änderungen in deiner Eingabe einen riesigen Unterschied haben können.
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="text">
                Das Hashing mit SHA 256 ist eine sogenannte "Einwegfunktion". Das heißt, dass zwar bei der Eingabe des
                gleichen Textes immer auch das gleiche Ergebnis herauskommt, man anhand des Ergebnisses jedoch niemals
                herausfinden kann, was der Text war. Probiere das gerne einmal mit deinem Sitznachbarn aus. Erhaltet ihr
                genau den gleichen Hashwert, wenn ihr genau das gleiche eintippt? Probiert auch einmal aus was passiert,
                wenn ihr nur eine ganz kleine Änderung macht. Setzt zum Beispiel irgendwo einen Punkt hin oder eine
                extra Leerzeichen oder schreibt ein Wort groß statt klein. Vergleicht eure Ergebnisse.
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="text">
                Eingabe:
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <input (input)="computeHash($event.target['value'])" type="text" class="input w-100">
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="text">
                Hash:
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <input disabled value="{{hash1}}" type="text" class="input w-100">
            </div>
          </div>
        </div>


        <div class="tab-pane fade" id="uebung4-tab-pane" role="tabpanel" aria-labelledby="uebung4-tab" tabindex="0">
          ...
        </div>


      </div>
    </div>
